---
name: token-stats
description: Token ä½¿ç”¨ç»Ÿè®¡ - æ‰«æ session æ—¥å¿—å¹¶ç”Ÿæˆä½¿ç”¨æŠ¥å‘Š
homepage: https://docs.openclaw.ai/skills#token-stats
metadata: {"openclaw":{"emoji":"ğŸ“Š","always":true}}
---

# Token Stats

Token ä½¿ç”¨ç»Ÿè®¡å·¥å…·ï¼Œè‡ªåŠ¨æ‰«æ session æ—¥å¿—å¹¶ç”Ÿæˆæ¨¡å‹è°ƒç”¨ç»Ÿè®¡æŠ¥å‘Šã€‚

## åŠŸèƒ½

- **è‡ªåŠ¨æ‰«æ**: å®šæœŸæ‰«ææ‰€æœ‰ session æ–‡ä»¶ï¼Œæå–æ¨¡å‹è°ƒç”¨ä¿¡æ¯
- **å¢é‡æ›´æ–°**: åªæ‰«æä¸Šæ¬¡æ‰«æåæ–°å¢çš„è°ƒç”¨
- **ç»Ÿè®¡æŠ¥å‘Š**: æŸ¥çœ‹æŒ‰æ—¥æœŸã€æ¨¡å‹åˆ†ç»„çš„ç»Ÿè®¡ä¿¡æ¯
- **æˆæœ¬è¿½è¸ª**: è‡ªåŠ¨è®¡ç®— API è°ƒç”¨æˆæœ¬

## æ–‡ä»¶ç»“æ„

```
token-stats/
â”œâ”€â”€ SKILL.md
â””â”€â”€ scripts/
    â”œâ”€â”€ scan.py           # æ‰«æ session æ–‡ä»¶
    â”œâ”€â”€ stats.py          # ç”Ÿæˆç»Ÿè®¡æŠ¥å‘Š
    â”œâ”€â”€ token-stats       # ä»…æŸ¥çœ‹ç»Ÿè®¡ï¼ˆå‘½ä»¤ï¼‰
    â””â”€â”€ token-stats-now   # æ‰«æ+ç»Ÿè®¡ï¼ˆå‘½ä»¤ï¼‰
```

## æ•°æ®æ–‡ä»¶

- **Token æ—¥å¿—**: `/root/.openclaw/workspace/memory/token-usage.jsonl`
- **æ‰«æè¿½è¸ª**: `/root/.openclaw/workspace/memory/token-scan-tracker.json`

## å‘½ä»¤

### `/token_stats` - æ‰«æ+ç»Ÿè®¡ï¼ˆè‡ªå®šä¹‰å‘½ä»¤ï¼‰

å…ˆæ‰§è¡Œæ‰«æï¼Œç„¶åæ˜¾ç¤ºå®Œæ•´ç»Ÿè®¡æŠ¥å‘Šã€‚

**åŠŸèƒ½ï¼š**
- æ‰«ææ‰€æœ‰ session æ–‡ä»¶ï¼Œæå–æ–°çš„ token ä½¿ç”¨è®°å½•
- æ˜¾ç¤ºå®Œæ•´ç»Ÿè®¡æŠ¥å‘Šï¼ˆæ±‡æ€»ã€æ¯æ—¥è¶‹åŠ¿ã€æ¨¡å‹ç»Ÿè®¡ã€æˆæœ¬åˆ†æã€Top 10ï¼‰

**å®ç°ï¼š** `token-stats-now`

### `/token_stats_show` - ä»…ç»Ÿè®¡ï¼ˆè‡ªå®šä¹‰å‘½ä»¤ï¼‰

ç›´æ¥æ˜¾ç¤ºå·²æœ‰ç»Ÿè®¡æ•°æ®ï¼Œä¸æ‰§è¡Œæ‰«æã€‚

**åŠŸèƒ½ï¼š**
- å¿«é€ŸæŸ¥çœ‹æœ€æ–°ç»Ÿè®¡ï¼Œæ— éœ€ç­‰å¾…æ‰«æ
- é€‚åˆé¢‘ç¹æŸ¥çœ‹ç»Ÿè®¡çš„åœºæ™¯

**å®ç°ï¼š** `token-stats`

### å‘½ä»¤è¡Œç”¨æ³•

```bash
# ä»…æŸ¥çœ‹ç»Ÿè®¡ï¼ˆä¸æ‰«æï¼‰
token-stats

# æ‰«æå¹¶ç»Ÿè®¡
token-stats-now

# æŒ‰æ—¥æœŸåˆ†ç»„ç»Ÿè®¡
token-stats --group-by date
token-stats-now --group-by date

# æŒ‰æ¨¡å‹åˆ†ç»„ç»Ÿè®¡
token-stats --group-by model
token-stats-now --group-by model

# æœ€è¿‘ N æ¬¡è°ƒç”¨è¯¦æƒ…
token-stats --recent 10
token-stats-now --recent 5

# ä»…æ˜¾ç¤ºç®€åŒ–ç»Ÿè®¡
token-stats --simple

# JSON æ ¼å¼è¾“å‡º
token-stats --format json

# ä»…æ‰§è¡Œæ‰«æï¼ˆä¸è¾“å‡ºç»Ÿè®¡ï¼‰
python3 /root/.openclaw/workspace/skills/token-stats/scripts/scan.py
```

## å®šæ—¶ä»»åŠ¡

å»ºè®®é…ç½® cron ä»»åŠ¡ï¼Œæ¯ 30 åˆ†é’Ÿè‡ªåŠ¨æ‰«æä¸€æ¬¡ï¼š

```bash
# æ·»åŠ åˆ° crontab
*/30 * * * * /usr/bin/python3 /root/.openclaw/workspace/skills/token-stats/scripts/scan.py >> /var/log/token-stats-cron.log 2>&1
```

æˆ–è€…ä½¿ç”¨ OpenClaw çš„ cron åŠŸèƒ½ï¼š

```json
{
  "schedule": {"kind": "every", "everyMs": 1800000},
  "payload": {
    "kind": "systemEvent",
    "text": "è¯·è¿è¡Œ token-stats æ‰«æä»»åŠ¡"
  },
  "sessionTarget": "main"
}
```

## ç»Ÿè®¡è¾“å‡ºç¤ºä¾‹

```
======================================================================
ğŸ“Š TOKEN ä½¿ç”¨ç»Ÿè®¡æ±‡æ€»
======================================================================
ç»Ÿè®¡å‘¨æœŸ:      2026-02-01 è‡³ 2026-02-03
æ€»è°ƒç”¨æ¬¡æ•°:    327
æ€» Token æ•°:   13,111,817
  â””â”€ è¾“å…¥:     6,234,567 (47.5%)
  â””â”€ è¾“å‡º:     1,234,890 (9.4%)
  â””â”€ ç¼“å­˜è¯»å–: 5,642,360 (43.0%)
è¾“å…¥/è¾“å‡ºæ¯”:   5.05:1
æ€»æˆæœ¬:        $1.593352
å¹³å‡ Tokens/æ¬¡: 40,097
å¹³å‡æˆæœ¬/æ¬¡:   $0.004873

----------------------------------------------------------------------
ğŸ“… æ¯æ—¥ä½¿ç”¨è¶‹åŠ¿
----------------------------------------------------------------------
  æ—¥æœŸ          è°ƒç”¨        Tokens         æˆæœ¬           å æ¯”
  ------------ -------- -------------- -------------- --------
  2026-02-01      156      6,881,329     $1.593352      52.5%
  2026-02-03      171      6,230,488     $0.000000      47.5%

----------------------------------------------------------------------
ğŸ¤– æŒ‰æ¨¡å‹ç»Ÿè®¡
----------------------------------------------------------------------
  æ¨¡å‹                         è°ƒç”¨       Tokens        è¾“å…¥        è¾“å‡º        ç¼“å­˜         æˆæœ¬
  ------------------------- ------ ------------ ------------ ------------ ------------ ------------
  glm-4.5-flash                 68    3,504,184    3,401,234       45,678       57,272   $0.000000
  glm-4.7                      178    6,881,329    2,123,456      234,567    4,523,306   $1.593352
  kimi-for-coding               81    2,726,304      709,877      954,645    1,061,782   $0.000000

----------------------------------------------------------------------
ğŸ’° æˆæœ¬åˆ†æ
----------------------------------------------------------------------
  æ¨¡å‹                         æˆæœ¬           å æ¯”    $/1K Tokens   $/è°ƒç”¨
  ------------------------- -------------- -------- ------------- --------
  glm-4.7                    $1.593352      100.0%   $0.231550    $0.008951
  glm-4.5-flash              $0.000000        0.0%   $0.000000    $0.000000
  kimi-for-coding            $0.000000        0.0%   $0.000000    $0.000000
  ------------------------- -------------- --------
  æ€»è®¡                       $1.593352      100.0%

----------------------------------------------------------------------
ğŸ† TOP 10 å¯¹è¯ï¼ˆæŒ‰ Token æ•°ï¼‰
----------------------------------------------------------------------
  æ’å æ—¥æœŸ         æ¨¡å‹                   Tokens         æˆæœ¬
  ---- ------------ -------------------- ------------ ------------
  1    2026-02-01   glm-4.7                 137,678   $0.083351
  2    2026-02-01   glm-4.7                 137,373   $0.018537
  ...
```

## æ•°æ®æ ¼å¼

æ¯æ¡ token ä½¿ç”¨è®°å½•åŒ…å«ï¼š

```json
{
  "timestamp": "2026-02-03T07:54:33.277Z",
  "date": "2026-02-03",
  "provider": "zai",
  "model": "kimi-for-coding",
  "input": 49,
  "output": 71,
  "cacheRead": 41738,
  "cacheWrite": 0,
  "totalTokens": 41858,
  "cost": {
    "input": 0.0000294,
    "output": 0.0001562,
    "cacheRead": 0.00459118,
    "cacheWrite": 0,
    "total": 0.00477678
  }
}
```

## ç³»ç»Ÿå‘½ä»¤é›†æˆ

å°†å‘½ä»¤æ·»åŠ åˆ°ç³»ç»Ÿ PATHï¼š

```bash
# åˆ›å»ºè½¯é“¾æ¥
ln -sf /root/.openclaw/workspace/skills/token-stats/scripts/token-stats /usr/local/bin/token-stats
ln -sf /root/.openclaw/workspace/skills/token-stats/scripts/token-stats-now /usr/local/bin/token-stats-now

# ç°åœ¨å¯ä»¥ç›´æ¥ä½¿ç”¨
token-stats
token-stats-now
```

## æ³¨æ„äº‹é¡¹

1. **é¦–æ¬¡ä½¿ç”¨**: è¿è¡Œ `token-stats-now` è¿›è¡Œé¦–æ¬¡æ‰«æ
2. **æ•°æ®æŒä¹…åŒ–**: token-usage.jsonl åªè¿½åŠ ä¸åˆ é™¤
3. **å¢é‡æ‰«æ**: è‡ªåŠ¨è·³è¿‡å·²è®°å½•çš„è°ƒç”¨ï¼Œé¿å…é‡å¤
